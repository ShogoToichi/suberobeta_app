{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport firebase from \"firebase\";\nimport Button from '@material-ui/core/Button';\n\nclass Account extends Component {\n  constructor(props) {\n    super(props); // 属性値として使うためにバインド\n\n    _defineProperty(this, \"style\", {\n      fontSize: \"12pt\",\n      padding: \"5px 10px\"\n    });\n\n    this.login_check = this.login_check.bind(this);\n  } //ログイン処理\n\n\n  login() {\n    firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n    let provider = new firebase.auth.GoogleAuthProvider();\n    var self = this;\n    firebase.auth().signInWithPopup(provider) //ログイン処理完了後resultで値を受け取りReduxへ\n    .then(result => {\n      this.props.dispatch({\n        type: \"UPDATE_USER\",\n        value: {\n          login: true,\n          username: result.user.displayName,\n          email: result.user.email,\n          imageurl: \"\"\n        }\n      }); //ログイン時の処理をpropsで受け取れるようにする\n      //とりま使ってない\n      // this.props.onLogined();\n    });\n  } //ログアウト機能\n\n\n  logout() {\n    console.log(\"logout\");\n    firebase.auth().signOut();\n    this.props.dispatch({\n      type: \"UPDATE_USER\",\n      value: {\n        login: false,\n        username: \"(click here!)\",\n        email: \"\",\n        data: [],\n        imageurl: \"\"\n      }\n    }); // this.props.onLogouted();\n  } //ログイン、ログアウト処理をクリック時に分岐する関数\n\n\n  login_check() {\n    if (this.props.login === false) {\n      this.login();\n    } else {\n      this.logout();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(Button, {\n      variant: \"outlined\",\n      size: \"large\",\n      color: \"inherit\",\n      onClick: this.login_check,\n      children: \"\\u30ED\\u30B0\\u30A4\\u30F3\"\n    });\n  }\n\n}\n\nAccount = connect(state => state)(Account);\nexport default Account;","map":null,"metadata":{},"sourceType":"module"}